amlModuleIdentifier:
  namespace: css
  moduleName: Score NLP Tasks
  description: Score NLP Tasks 
  moduleVersion: 0.0.1
description: >
 Scored Trained NLP downstream tasks using transformers.
isdeterministic: true
metadata:
  annotations:
    tags:
    - NLP
    - Transformers
    - Deep Learning
    - bert
    sourceCode: https://github.com/azure/amlmodules
    contact: Yassine khelifi <yassinek@microsoft.com>
inputs:
- name: Scoring dataset
  type: DataFrameDirectory
  port: true
- name: Trained model
  type: ModelDirectory
  port: true
- name: Text column
  type: String
  description: Select column containing text to score
outputs:
- name: Results dataset
  type: DataFrameDirectory
  port: true
implementation:
  container:
    conda: nlptasks_conda.yaml
    image: mcr.microsoft.com/azureml/base-gpu:intelmpi2018.3-cuda10.0-cudnn7-ubuntu16.04
    additionalIncludes: 
      - ../score_nlptasks.py
      - ../tasks.py
      - ../args.py
    command: [python, score_nlptasks.py] 
    args: [
        --input-dir, {inputPath: Scoring dataset},
        --model-input-dir, {inputPath: Trained model},
        --text-column, {inputValue: Text column},
        --output-dir, {outputPath: Results dataset}
    ]
